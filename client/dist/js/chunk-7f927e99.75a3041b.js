(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f927e99"],{"05f4":function(t,e,s){},"0a49":function(t,e,s){var a=s("9b43"),o=s("626a"),r=s("4bf8"),n=s("9def"),i=s("cd1c");t.exports=function(t,e){var s=1==t,c=2==t,u=3==t,m=4==t,l=6==t,d=5==t||l,g=e||i;return function(e,i,p){for(var f,h,_=r(e),v=o(_),b=a(i,p,3),C=n(v.length),y=0,w=s?g(e,C):c?g(e,0):void 0;C>y;y++)if((d||y in v)&&(f=v[y],h=b(f,y,_),t))if(s)w[y]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return y;case 2:w.push(f)}else if(m)return!1;return l?-1:u||m?m:w}}},"20d6":function(t,e,s){"use strict";var a=s("5ca1"),o=s("0a49")(6),r="findIndex",n=!0;r in[]&&Array(1)[r]((function(){n=!1})),a(a.P+a.F*n,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(r)},"2ade":function(t,e,s){t.exports=s.p+"img/icons8-businessman.2dcf714e.svg"},"3e26":function(t,e,s){"use strict";var a=s("05f4"),o=s.n(a);o.a},5931:function(t,e){t.exports="data:image/png;base64,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"},"67be":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page page--room"},[s("section",{staticClass:"section section--room section--mmt p-0"},[s("div",{staticClass:"section__content u-max-height p-0"},[s("div",{staticClass:"chat"},[s("Sidebar",{ref:"userList",attrs:{name:"userlist"}},[s("template",{slot:"header"},[s("div",{staticClass:"userlist__actions"},[s("div",[s("ion-icon",{staticClass:"icon",attrs:{name:"contacts"}})],1),s("span",{staticClass:"section__title"},[t._v("Online Users")]),s("div",{on:{click:t.toggleUserList}},[s("ion-icon",{staticClass:"icon",attrs:{name:"backspace"}})],1)])]),s("template",{slot:"body"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchInput,expression:"searchInput",modifiers:{trim:!0}}],staticClass:"rooms__search-input",attrs:{type:"text",placeholder:"Search user by name"},domProps:{value:t.searchInput},on:{input:function(e){e.target.composing||(t.searchInput=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),this.getCurrentRoom&&t.filteredUsers?s("ul",{staticClass:"chat__userlist"},[s("transition-group",{attrs:{name:"slideDown"}},t._l(t.filteredUsers,(function(e){return s("li",{key:e.lookup._id,staticClass:"chat__user"},[s("div",{staticClass:"chat__user-item"},[s("div",{staticClass:"chat__user-image"},[null===e.lookup.social.id?s("img",{staticClass:"chat__user-avatar",attrs:{src:e.lookup.image,alt:""}}):s("img",{staticClass:"chat__user-avatar",attrs:{src:e.lookup.social.image,alt:""}})]),s("div",{staticClass:"chat__user-details"},[s("span",[t._v(t._s(e.lookup.handle))])])])])})),0)],1):t._e()]),s("template",{slot:"footer"},[s("button",{staticClass:"btn btn--clear btn--danger center",on:{click:t.leaveRoom}},[t._v("Leave Room")])])],2),s("div",{staticClass:"chat__content",class:{mlzero:!t.sidebarVisible}},[t.room?s("div",{staticClass:"chat__header"},[s("span",{staticClass:"section__title"},[t._v("# "+t._s(t.room.name))]),s("div",{staticClass:"chat__actions"},[s("ion-icon",{staticClass:"icon",attrs:{name:"return-left"},on:{click:t.leaveRoom}}),s("ion-icon",{staticClass:"icon",attrs:{name:"create"},on:{click:t.openEditRoom}}),s("ion-icon",{staticClass:"icon",attrs:{name:"analytics"},on:{click:t.viewRoomDetails}}),s("ion-icon",{staticClass:"icon",attrs:{name:"people"},on:{click:t.toggleUserList}})],1)]):t._e(),s("MessageList",{attrs:{messages:t.messages}}),s("transition",{attrs:{name:"slideDown"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.usersTyping.length>0,expression:"usersTyping.length > 0"}],staticClass:"chat__utyping"},[s("span",[t._v(t._s(t.getUsersTyping))])])]),s("ChatInput")],1)],1)]),this.getCurrentRoom?s("Modal",{ref:"editRoom",attrs:{name:"editRoom"}},[s("template",{slot:"header"},[s("h2",{staticClass:"text-upper"},[t._v("Edit Room: "+t._s(this.getCurrentRoom.name))])]),s("template",{slot:"body"},[s("form",{staticClass:"form form--nbs pt-3",attrs:{slot:"body"},on:{submit:t.handleEditRoom},slot:"body"},[s("div",{staticClass:"form__input-group"},[s("ion-icon",{staticClass:"form__icon",attrs:{name:"pricetags"}}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.newRoomName,expression:"newRoomName",modifiers:{trim:!0}}],staticClass:"form__control",attrs:{type:"text",name:"roomName",placeholder:"Enter New Room Name",pattern:".{3,20}",required:""},domProps:{value:t.newRoomName},on:{input:function(e){e.target.composing||(t.newRoomName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{staticClass:"form__label",attrs:{for:"roomName"}},[t._v("New Room name")])],1),s("Error",{attrs:{errors:t.errors}}),s("button",{staticClass:"btn btn--clear btn--info",attrs:{type:"submit"}},[t._v("Update Room Name")])],1)])],2):t._e(),this.getCurrentRoom&&t.messages?s("Modal",{ref:"roomDetails",attrs:{name:"roomDetails"}},[s("template",{slot:"header"},[s("h2",{staticClass:"lead text-upper"},[t._v("Room Details: "+t._s(this.getCurrentRoom.name))])]),s("template",{slot:"body"},[s("div",{staticClass:"infobox"},[s("div",{staticClass:"infobox__item"},[s("ion-icon",{staticClass:"icon icon-lg",attrs:{name:"planet"}})],1),s("div",{staticClass:"infobox__item"},[s("span",{staticClass:"infobox__item--left"},[t._v("Online Users")]),s("span",{staticClass:"infobox__item--right"},[t._v(t._s(this.getCurrentRoom.users.length))])]),s("div",{staticClass:"infobox__item"},[s("span",{staticClass:"infobox__item--left"},[t._v("Messages")]),s("span",{staticClass:"infobox__item--right"},[t._v(t._s(t.messages.length))])]),s("div",{staticClass:"infobox__item"},[s("span",{staticClass:"infobox__item--left"},[t._v("Room Admin")]),s("span",{staticClass:"infobox__item--right"},[t._v(t._s(this.getCurrentRoom.user?this.getCurrentRoom.user.handle:"Unknown User"))])]),s("div",{staticClass:"infobox__item"},[s("span",{staticClass:"infobox__item--left"},[t._v("Created")]),s("span",{staticClass:"infobox__item--right"},[t._v(t._s(t.moment(this.getCurrentRoom.created_at).fromNow()))])])])])],2):t._e()],1)])},o=[],r=(s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("6b54"),s("8e6e"),s("8615"),s("ac6a"),s("456d"),s("3835")),n=(s("7f7f"),s("20d6"),s("6762"),s("2fdb"),s("55dd"),s("ade3")),i=s("bc3a"),c=s.n(i),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat__c-messagelist"},[t.messages?a("ul",{ref:"messages",staticClass:"chat__messages"},[a("transition-group",{attrs:{name:"slideDown"}},t._l(t.messages,(function(e){return a("li",{key:e._id,staticClass:"chat__message"},[!e.admin&&e.user&&e.user._id===t.user._id?a("div",{staticClass:"chat__message-item u-flex-right"},[a("div",{staticClass:"chat__message-body"},[a("div",{staticClass:"chat__message-content chat__message-content--right"},[a("span",[t._v(t._s(e.content))])]),a("div",{staticClass:"chat__message-details"},[a("span",[t._v(t._s(e.user.handle))]),a("span",[t._v(t._s(t.moment(e.created_at).fromNow()))])])]),e.user.social.id?a("img",{staticClass:"chat__user-avatar",attrs:{src:e.user.social.image,alt:""}}):a("img",{staticClass:"chat__user-avatar",attrs:{src:e.user.image,alt:""}})]):e.admin?a("div",{staticClass:"chat__message-item u-flex-center"},[a("img",{staticClass:"chat__user-avatar",attrs:{src:s("2ade"),alt:""}}),a("div",{staticClass:"chat__message-body"},[a("div",{staticClass:"chat__message-content"},[a("span",[t._v(t._s(e.content))])]),a("div",{staticClass:"chat__message-details"},[a("span",[t._v("Admin")]),a("span",[t._v(t._s(t.moment(e.created_at).fromNow()))])])])]):e.user?a("div",{staticClass:"chat__message-item"},[e.user.social.id?a("img",{staticClass:"chat__user-avatar",attrs:{src:e.user.social.image,alt:""}}):a("img",{staticClass:"chat__user-avatar",attrs:{src:e.user.image,alt:""}}),a("div",{staticClass:"chat__message-body"},[a("div",{staticClass:"chat__message-content chat__message-content--left"},[a("span",[t._v(t._s(e.content))])]),a("div",{staticClass:"chat__message-details"},[a("span",[t._v(t._s(e.user.handle))]),a("span",[t._v(t._s(t.moment(e.created_at).fromNow()))])])])]):a("div",{staticClass:"chat__message-item"},[a("img",{staticClass:"chat__user-avatar",attrs:{src:s("5931"),alt:""}}),a("div",{staticClass:"chat__message-body"},[a("div",{staticClass:"chat__message-content chat__message-content--left"},[a("span",[t._v(t._s(e.content))])]),a("div",{staticClass:"chat__message-details"},[a("span",[t._v("Unknown User")]),a("span",[t._v(t._s(t.moment(e.created_at).fromNow()))])])])])])})),0)],1):t._e()])},m=[],l=s("2f62");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function g(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(Object(s),!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p={name:"MessageList",props:["messages"],computed:g({},Object(l["c"])(["getUserData"])),data:function(){return{user:null}},created:function(){this.user=this.getUserData},methods:{scrollMessages:function(){var t=this.$refs.messages;t.scrollTop=t.scrollHeight}},mounted:function(){this.scrollMessages()},updated:function(){this.scrollMessages()}},f=p,h=s("2877"),_=Object(h["a"])(f,u,m,!1,null,"151ad1c9",null),v=_.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat__input"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.content,expression:"content",modifiers:{trim:!0}}],staticClass:"chat__input-control",attrs:{placeholder:"Type a Message","data-gramm_editor":"false"},domProps:{value:t.content},on:{keyup:t.triggerMessageSend,input:function(e){e.target.composing||(t.content=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("button",{staticClass:"btn btn--clear btn--info m-0 u-border-rad-0",on:{click:t.sendMessage}},[t._v("Send")])])},C=[];function y(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function w(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?y(Object(s),!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var O={name:"ChatInput",data:function(){return{content:""}},computed:w({},Object(l["c"])(["getUserData","getCurrentRoom","getSocket"])),methods:{sendUserTyping:function(){this.getSocket.emit("userTyping",{room:this.getCurrentRoom,user:this.getUserData})},sendUserNotTyping:function(){this.getSocket.emit("removeUserTyping",{room:this.getCurrentRoom,user:this.getUserData})},triggerMessageSend:function(t){t.preventDefault(),13!==t.keyCode||t.shiftKey?""!==this.content?this.sendUserTyping():this.sendUserNotTyping():this.sendMessage()},sendMessage:function(){this.getSocket.emit("newMessage",{room:this.getCurrentRoom,user:this.getUserData,content:this.content}),this.content="",this.sendUserNotTyping()}},mounted:function(){}},A=O,R=Object(h["a"])(A,b,C,!1,null,"353b094b",null),k=R.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slideLeft",mode:"out-in"}},[t.visible?s("div",{staticClass:"sidebar"},[s("div",{staticClass:"sidebar__header"},[t._t("header",[s("h4",[t._v("Default Header")])])],2),s("div",{staticClass:"sidebar__body"},[t._t("body")],2),s("div",{staticClass:"sidebar__footer"},[t._t("footer")],2)]):t._e()])},D=[],S={name:"Sidebar",data:function(){return{visible:!(window.innerWidth<768)}},methods:{toggle:function(){this.visible=!this.visible}},mounted:function(){}},j=S,N=(s("f8cd"),Object(h["a"])(j,U,D,!1,null,"6647b72b",null)),x=N.exports,L=s("6b12"),T=s("2b31");function E(t,e){var s;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(s=I(t))||e&&t&&"number"===typeof t.length){s&&(t=s);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,i=!1;return{s:function(){s=t[Symbol.iterator]()},n:function(){var t=s.next();return n=t.done,t},e:function(t){i=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(i)throw r}}}}function I(t,e){if(t){if("string"===typeof t)return P(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}function J(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Y(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?J(Object(s),!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):J(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var M={name:"Room",components:{MessageList:v,ChatInput:k,Sidebar:x,Error:T["a"],Modal:L["a"]},data:function(){return{room:[],users:[],usersTyping:[],messages:[],newRoomName:"",sidebarVisible:!(window.innerWidth<768),searchInput:"",errors:[],roomLeft:!1}},computed:Y(Y({},Object(l["c"])(["getUserData","getCurrentRoom","getSocket"])),{},{filteredUsers:function(){var t=this;return this.users.slice().sort(this.sortAlphabetical).filter((function(e){return e.lookup.username.toLowerCase().includes(t.searchInput.toLowerCase())}))},getUsersTyping:function(){if(this.usersTyping.length>0)return"".concat(this.usersTyping.join(", ")," is typing...")}}),methods:Y(Y({},Object(l["b"])(["saveCurrentRoom"])),{},{checkUserTabs:function(t){var e=this;t&&-1===t.users.findIndex((function(t){return t.lookup._id===e.getUserData._id}))&&this.$router.push({name:"RoomList"})},sortAlphabetical:function(t,e){var s=t.lookup.username.toUpperCase(),a=e.lookup.username.toUpperCase();return s<a?-1:s>a?1:0},leaveRoom:function(t,e){var s=this;t&&t.preventDefault(),c.a.post("/api/room/remove/users",{room_name:this.getCurrentRoom.name}).then((function(t){(s.room.access||s.room.accessIds.includes(s.getUserData._id))&&s.getSocket.emit("exitRoom",{room:t.data,user:null,admin:!0,content:"".concat(s.getUserData.handle," left ").concat(s.getCurrentRoom.name)}),s.roomLeft=!0,e||s.$router.push({name:"RoomList"})}))},openEditRoom:function(){this.$refs.editRoom.open()},handleEditRoom:function(t){var e=this;t.preventDefault(),c.a.post("/api/room/update/name",{room_name:this.getCurrentRoom.name,new_room_name:this.newRoomName}).then((function(t){if(t.data.errors){var s,a=E(t.data.errors);try{for(a.s();!(s=a.n()).done;){var o=s.value,n=Object.keys(o),i=Object(r["a"])(n,1),c=i[0],u=Object.values(o),m=Object(r["a"])(u,1),l=m[0];e.errors.push({key:c,value:l})}}catch(d){a.e(d)}finally{a.f()}}else e.$refs.editRoom.close(),e.getSocket.emit("roomUpdateEvent",{oldRoomName:e.getCurrentRoom.name,room:t.data}),e.getSocket.emit("newMessage",{room:e.getCurrentRoom,user:e.getUserData,admin:!0,content:"".concat(e.getUserData.username," updated room ").concat(e.getCurrentRoom.name," to ").concat(e.newRoomName)}),e.newRoomName="";setTimeout((function(){e.errors=[]}),1500)})).catch((function(t){return console.log(t)}))},viewRoomDetails:function(){this.$refs.roomDetails.open()},toggleUserList:function(){this.$refs.userList.toggle(),this.sidebarVisible=!this.sidebarVisible}}),created:function(){var t=this;c.a.get("/api/room/".concat(this.$route.params.id)).then((function(e){if(console.log(e),t.room=e.data,t.users=e.data.users,t.$store.dispatch("saveCurrentRoom",e.data),!e.data.access&&!e.data.accessIds.includes(t.getUserData._id)&&t.getUserData._id!==e.data.user._id)return t.$router.push({name:"RoomList",params:{message:"You do not have access to this room"}});t.getSocket.emit("userJoined",{room:t.getCurrentRoom,user:t.getUserData,content:"".concat(t.getUserData.handle," joined ").concat(t.getCurrentRoom.name),admin:!0}),t.getSocket.on("updateRoomData",(function(e){e=JSON.parse(e),e.messages&&(t.messages=e.messages),e.room&&(t.room=e.room,t.users=e.room.users,t.$store.dispatch("saveCurrentRoom",e.room))})),t.getSocket.on("reconnect",(function(){t.usersTyping=[],t.getSocket.emit("reconnectUser",{room:t.getCurrentRoom,user:t.getUserData})})),t.getSocket.on("reconnected",(function(){console.warn("Reconnected")})),t.getSocket.on("disconnect",(function(){console.warn("Disconnected")})),t.getSocket.on("updateUserList",(function(e){t.users=JSON.parse(e).users})),t.getSocket.on("receivedUserExit",(function(e){t.checkUserTabs(e)})),t.getSocket.on("receivedNewMessage",(function(e){t.messages.push(JSON.parse(e))})),t.getSocket.on("receivedUserTyping",(function(e){t.usersTyping=JSON.parse(e).filter((function(e){return e!==t.getUserData.handle}))})),t.getSocket.on("roomDeleted",(function(){t.$store.dispatch("saveCurrentRoom",null),setTimeout((function(){t.$router.push({name:"RoomList"})}),2e3)})),t.getSocket.on("roomUpdated",(function(e){t.room=JSON.parse(e).room,t.$store.dispatch("saveCurrentRoom",JSON.parse(e).room)}))})).catch((function(e){404===e.response.status&&t.$router.push({name:"RoomList",params:{message:"This room does not exist or has been deleted"}})}))},beforeDestroy:function(){this.getCurrentRoom&&!this.roomLeft&&this.leaveRoom(null,!0),this.getSocket.removeListener("userJoined")},mounted:function(){}},B=M,G=(s("3e26"),Object(h["a"])(B,a,o,!1,null,null,null));e["default"]=G.exports},af35:function(t,e,s){},cd1c:function(t,e,s){var a=s("e853");t.exports=function(t,e){return new(a(t))(e)}},e853:function(t,e,s){var a=s("d3f4"),o=s("1169"),r=s("2b4c")("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),a(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}},f8cd:function(t,e,s){"use strict";var a=s("af35"),o=s.n(a);o.a}}]);
//# sourceMappingURL=chunk-7f927e99.75a3041b.js.map